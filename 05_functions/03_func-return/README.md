# Go 函数返回值

## 返回值分类概览

| 类型     | 说明                 | 示例形式                                           |
|--------|--------------------|------------------------------------------------|
| 无返回值   | 函数执行完即结束           | `func logMsg(msg string)`                      |
| 单返回值   | 返回一个结果             | `func add(a, b int) int`                       |
| 多返回值   | 同时返回多个结果           | `func divide(a, b int) (int, error)`           |
| 命名返回值  | 在函数签名中定义返回变量名      | `func rect(w, h float64) (area, peri float64)` |
| 返回指针   | 返回局部变量地址（安全）       | `func newUser() *User`                         |
| 返回引用类型 | 可直接返回切片、map、chan 等 | `func getData() []int`                         |
| 返回函数   | 函数可作为返回值（高阶函数）     | `func makeAdder(x int) func(int) int`          |
| 泛型返回   | 返回泛型类型或泛型函数        | `func Max[T Ordered](a, b T) T`                |

### 返回指针与引用类型

* **返回局部变量的指针是安全的**（Go 编译器自动逃逸分析）；
* **切片、map、chan 本身为引用类型**，返回它们无需取指针；
* 返回引用类型不会复制底层数据，只复制描述符。

### 多返回值与错误处理模式

* 多返回值是 Go 的惯用设计
* 常见模式：`(result, err)`
* `_` 可用于忽略无用的返回值
* 逻辑正常返回结果，异常时返回零值与 `error`

---

### 函数返回函数（高阶函数）

* 函数可以返回另一个函数
* 允许**闭包（closure）**捕获外部变量
* 常用于：

    * 工厂函数
    * 装饰器（decorator）
    * 延迟执行逻辑
    * 动态生成行为

### 泛型函数返回值

* 可返回泛型类型（如 `T`）
* 也可返回泛型函数（如 `func(T) T`）
* 仍受类型参数约束
* 保持静态类型安全

### 与返回值顺序

* `return` 先赋值，再执行 `defer`
* 命名返回值可被 `defer` 修改
* 匿名返回值不会被后续 defer 影响

