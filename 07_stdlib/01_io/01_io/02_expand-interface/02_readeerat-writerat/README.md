## `io.ReaderAt` / `io.WriterAt`

`io.ReaderAt` 和 `io.WriterAt`的核心能力是：

- 支持随机位置读写而且不影响当前读写指针位置
- 也就是说，它们是为并发、分块、随机访问设计的，而不是顺序读取

### `io.ReaderAt`

```
type ReaderAt interface {
    ReadAt(p []byte, off int64) (n int, err error)
}
```

- p 是存放读取结果的缓冲区
- off 是从文件起始位置算起的绝对偏移
- 不会修改当前文件的读写指针

| 特性      | ReaderAt 的行为                 |
|---------|------------------------------|
| 不影响文件指针 | 不会改变使用 `Seek` 或普通 `Read` 的位置 |
| 支持并发    | 不共享文件指针，安全并发读取               |
| 读取越界    | 会返回 `io.EOF`                 |

**与 Seeker 的区别**

| 特性     | `Seeker` + `Read` | `ReaderAt`  |
|--------|-------------------|-------------|
| 依赖文件指针 | 会改变               | 不改变         |
| 并发安全   | 多协程会互相影响          | 可安全并发       |
| 适合场景   | 顺序读 / 少量 seek     | 随机读取 / 并发读取 |

### `io.WriterAt`

```
type WriterAt interface {
    WriteAt(p []byte, off int64) (n int, err error)
}
```

- 可以向文件中的任意偏移位置写数据
- 同样不会改变文件指针
- 常用于覆盖写 / 定位写

### 总结

| 接口            | 核心能力   | 是否改变文件指针 | 是否适合并发  | 常见用途        |
|---------------|--------|----------|---------|-------------|
| `io.Seeker`   | 移动指针   | 是        | 否       | 顺序读写 + 跳转   |
| `io.ReaderAt` | 指定位置读取 | 否        | 是       | 随机 / 并发读取文件 |
| `io.WriterAt` | 指定位置写入 | 否        | 仅不重叠时安全 | 覆盖写、文件块写入   |
