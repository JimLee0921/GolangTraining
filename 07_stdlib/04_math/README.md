## Math 模块

math 包提供基本常数和数学函数。

> 该软件包不保证在不同架构上产生完全相同的结果
>
> 文档地址：https://pkg.go.dev/math

| 类型            | 内容举例                              |
|---------------|-----------------------------------|
| **常量**        | `math.Pi`, `math.E`               |
| **基本数值运算**    | `Abs`, `Max`, `Min`               |
| **幂和平方根**     | `Pow`, `Sqrt`                     |
| **取整 / 四舍五入** | `Floor`, `Ceil`, `Round`, `Trunc` |
| **指数和对数**     | `Exp`, `Log`, `Log10`             |
| **三角函数**      | `Sin`, `Cos`, `Tan` 等             |

## math 包默认使用 float64

只要用 math，几乎所有结果都是 float64：

```
math.Sqrt(9) // 返回 float64
```

如果传入整数，比如：

```
x := 4
math.Sqrt(x) // 报错：int 不能直接传进 math 函数
```

需要手动转换

```
math.Sqrt(float64(4))
// 或直接传入
math.Sqrt(4)
```

### 基础常量

| 名称             | 含义       | 示例值            |
|----------------|----------|----------------|
| `math.Pi`      | 圆周率      | 3.14159…       |
| `math.E`       | 自然常数 *e* | 2.71828…       |
| `math.Phi`     | 黄金比例     | 1.61803…       |
| `math.Inf(±1)` | 正/负无穷    | `+Inf`, `-Inf` |
| `math.NaN()`   | 非数字（0/0） | `NaN`          |

### 取整/舍入类

| 函数               | 作用         | 示例                       |
|------------------|------------|--------------------------|
| `Ceil(x)`        | 向 **上** 取整 | `2.3 -> 3`               |
| `Floor(x)`       | 向 **下** 取整 | `2.8 -> 2`               |
| `Trunc(x)`       | 去掉小数直接取整   | `2.9 -> 2`, `-2.9 -> -2` |
| `Round(x)`       | 四舍五入       | `2.5 -> 3`, `-2.5 -> -2` |
| `RoundToEven(x)` | 银行业舍入法     | 很少手写，财务处理中可用             |

### 最大/最小/绝对值

| 函数          | 含义  | 示例             |
|-------------|-----|----------------|
| `Abs(x)`    | 绝对值 | `Abs(-3) -> 3` |
| `Max(x, y)` | 大者  | `3,5 -> 5`     |
| `Min(x, y)` | 小者  | `3,5 -> 3`     |

### 幂 / 根 / 指数 / 对数

| 函数          | 含义       | 示例                |
|-------------|----------|-------------------|
| `Pow(x, y)` | xʸ       | `Pow(2, 3) -> 8`  |
| `Sqrt(x)`   | √x       | `Sqrt(9) -> 3`    |
| `Cbrt(x)`   | ³√x      | `Cbrt(27) -> 3`   |
| `Exp(x)`    | eˣ       | `Exp(1) -> e`     |
| `Log(x)`    | ln(x)    | `Log(e) -> 1`     |
| `Log10(x)`  | log₁₀(x) | `Log10(100) -> 2` |
| `Log2(x)`   | log₂(x)  | `Log2(8) -> 3`    |

### 取余 / 整除

| 函数                | 含义         | 说明                |
|-------------------|------------|-------------------|
| `Mod(x, y)`       | 浮点数取余      | 与 `%` 不同，用于 float |
| `Remainder(x, y)` | IEEE754 余数 | 专用，少用             |

### 判断（是否为特殊值）

| 函数               | 判断内容                |
|------------------|---------------------|
| `IsNaN(x)`       | 是否为 NaN             |
| `IsInf(x, sign)` | 是否为 Inf（sign=0任意符号） |
| `Signbit(x)`     | 是否为负号（包括 -0）        |

### 三角函数

| 函数                                | 含义                 |
|-----------------------------------|--------------------|
| `Sin(x)` / `Cos(x)` / `Tan(x)`    | 正弦 / 余弦 / 正切       |
| `Asin(x)` / `Acos(x)` / `Atan(x)` | 反三角                |
| `Atan2(y, x)`                     | 计算点 (x,y) 的角度（最常用） |

> 三角函数参数/返回值均为弧度制，若使用角度，需要配合 math.Pi 转换。