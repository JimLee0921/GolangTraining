# Go 数据定义

## 变量和常量

| 分类               | 关键字          | 可否修改 | 存储位置  | 典型用法       |
|------------------|--------------|------|-------|------------|
| **变量（variable）** | `var` / `:=` | 可变   | 栈 或 堆 | 程序运行中数据会变化 |
| **常量（constant）** | `const`      | 不可变  | 编译期确定 | 程序运行期间保持固定 |

## 变量定义（var）

### 基本语法

```go
var name string = "JimLee"
var age int = 25
var price float64
```

* `var` 是定义变量的关键字
* 可以指定类型，也可以让编译器自动推断
* 未显式赋值时使用零值初始化

### 简短定义（`:=`）

只能在函数内部使用：

```go
func main() {
message := "Hello Go" // 自动推断类型为 string
count := 10
fmt.Println(message, count)
}
```

### 多变量定义

```go
var x, y, z int
var a, b = 1, "hi"
x, y, z = 3, 4, 5
```

### 零值机制（Zero Value）

| 类型                                     | 默认值     |
|----------------------------------------|---------|
| `int` / `float`                        | `0`     |
| `bool`                                 | `false` |
| `string`                               | `""`    |
| 引用类型（slice/map/chan/pointer/interface） | `nil`   |

> Go 会自动初始化所有变量，因此不会有未定义变量的错误

## 常量定义（const）

### 基本语法

```go
const Pi = 3.14159
const AppName string = "GoApp"
```

* `const` 声明的值必须在编译期确定
* 不允许在运行时计算
* 不能修改，否则编译错误

### 2️⃣ 多常量定义（分组写法）

```go
const (
StatusOK = 200
StatusError = 500
)
```

> Go 编译器会自动复用上一行的表达式

```go
const (
A = 1
B
C
)
// A,B,C 都是 1
```

### 常量类型与无类型常量

常量分为两类：

| 类型        | 示例                 | 特点               |
|-----------|--------------------|------------------|
| **有类型常量** | `const x int = 10` | 类型固定，需显式转换       |
| **无类型常量** | `const x = 10`     | 可自动转换为需要的类型（更灵活） |

```go
const a = 10      // 无类型
var b float64 = a // 自动转换为 float64
```

### `iota` 常量生成器

Go 提供了一个自动递增的计数器，用于枚举型常量：

```go
const (
Sunday = iota // 0
Monday        // 1
Tuesday       // 2
)
```

还能配合位运算：

```go
const (
_ = iota
KB = 1 << (10 * iota)
MB
GB
)
```

## 变量 vs 常量对比总结

| 特性        | 变量 (`var`)   | 常量 (`const`) |
|-----------|--------------|--------------|
| 是否可修改     | 可以           | 不可以          |
| 何时确定值     | 运行时          | 编译时          |
| 是否可推断类型   | 是            | 是            |
| 是否可用 `:=` | 是（函数内）       | 不可以          |
| 典型用途      | 动态数据（计数器、状态） | 配置项、枚举值、数学常数 |
| 是否可取地址    | 可以           | 不可以          |

## 命名规范（包的可用是强制性）

1. 函数内部使用小驼峰命名相当于 private，例如 userName、totalCount hidden （只能在本包内用）
2. 需要导出的包级变量或常量首字母大写相当于 public，例如 ExportedValue、 Visible（其他包可访问）
3. 避免以下划线开头，保持命名语义清晰
4. 缩写保持整体大写，例如 HTTPServer，而不是 HttpServer
5. 任何时候，如果一个变量被创建并初始化为零值，按照 Go 的习惯用法（idiomatic Go），推荐使用 var 关键字