# Go 字符串与字符类型（String, Byte, Rune）

## 概述

字符串（`string`）是 Go 中用于存储文本数据的基本类型。
它本质上是一个只读的字节序列（UTF-8 编码），
既可用于 ASCII 文本，也可用于多语言 Unicode 字符。

Go 还提供两个与字符相关的类型：

* `byte` —— `uint8` 的别名，用于原始字节
* `rune` —— `int32` 的别名，用于单个 Unicode 字符

---

## 字符串特性

* 类型：`string`
* 底层结构：一段连续的字节序列（不可变）
* 编码：默认使用 UTF-8
* 零值：空字符串 `""`
* 长度：以字节数计（`len()` 返回字节数，而非字符数）

> **不可变性**：字符串一旦创建，无法被修改；所有“修改”操作都会生成新的字符串

---

## 字符串的表示方式

### 普通字符串（解释型字符串）

* 使用双引号 `" "`；
* 支持转义字符，如 `\n`、`\t`、`\"` 等。

例如：

```
"Hello\nWorld" → 包含换行
```

### 原始字符串（Raw String Literal）

* 使用反引号 `` ` ``
* 不进行转义，可跨多行
* 常用于保存正则表达式、HTML、SQL 等

例如：

```
`多行文本
包含 \t 或 \n 不会被转义`
```

---

## 字符串基本操作

| 操作                      | 含义               |
|-------------------------|------------------|
| `len(s)`                | 返回字符串的字节长度       |
| `s[i]`                  | 按字节索引（返回 `byte`） |
| `s + t`                 | 字符串拼接            |
| `s == t`                | 内容比较             |
| `strings.Compare(a, b)` | 按字典序比较           |

> `len("你好") == 6`，因为一个汉字占 3 个字节（UTF-8 编码）

---

## 字符串与字符的关系

Go 没有独立的 `char` 类型，
单个字符通常用：

* `byte` —— 表示单个 ASCII 字节
* `rune` —— 表示单个 Unicode 字符（占 4 字节）

| 类型     | 含义            | 实际类型    | 示例    |
|--------|---------------|---------|-------|
| `byte` | 单个字节          | `uint8` | `'A'` |
| `rune` | 单个 Unicode 字符 | `int32` | `'你'` |

`rune` 是 Go 处理中日韩文字、emoji 的标准方式

---

## 遍历字符串

Go 提供两种方式遍历字符串：

1. **按字节**（索引方式）

    * 遍历 UTF-8 的底层字节
    * 对中文或多字节字符不安全
2. **按字符（rune）**（使用 `range`）

    * 自动解码 UTF-8
    * 推荐用于通用文本处理

---

## 字符串转换

| 转换目标                  | 方法                            | 说明         |
|-----------------------|-------------------------------|------------|
| `[]byte` -> `string`  | `string(b)`                   | 将字节数组转为字符串 |
| `string` -> `[]byte`  | `[]byte(s)`                   | 获取底层字节表示   |
| `[]rune` <-> `string` | `string(runes)` / `[]rune(s)` | 按字符层面转换    |

这种转换在编码转换、网络传输、文件 I/O中非常常见

---

## 常用内置与标准库函数

Go 标准库 `strings` 提供大量字符串工具函数：

| 分类      | 示例函数                                                      | 功能         |
|---------|-----------------------------------------------------------|------------|
| 长度 / 查找 | `len`, `strings.Contains`, `strings.Index`                | 获取长度、搜索子串  |
| 转换      | `strings.ToUpper`, `strings.ToLower`, `strings.TrimSpace` | 大小写、去空格    |
| 分割与连接   | `strings.Split`, `strings.Join`, `strings.Fields`         | 拆分 / 合并字符串 |
| 替换      | `strings.Replace`, `strings.ReplaceAll`                   | 替换子串       |
| 前缀 / 后缀 | `strings.HasPrefix`, `strings.HasSuffix`                  | 检查开头 / 结尾  |

---

## 字符串比较与排序

* Go 的字符串比较是按字节顺序（lexicographical order）进行
* 适合比较 ASCII 文本
* 对多语言（如中文）排序，应使用 `unicode` 或 `golang.org/x/text/collate` 库

---

## 字符串与不可变性

所有字符串操作（拼接、截取、替换）都会生成新字符串
因此：

* 频繁拼接应使用 `strings.Builder` 或 `bytes.Buffer` 提高性能
* 对大量字符串操作，避免在循环中直接使用 `+`

---

## 字符与 Unicode 支持

Go 完全支持 Unicode：

* 每个 `rune` 表示一个 Unicode 码点
* 可通过 `unicode` 包判断字符类别（如字母、数字、空白等）
* 可结合 `utf8` 包进行手动编码/解码

示例功能（概念）：

* `utf8.RuneCountInString(s)`：计算字符数
* `unicode.IsLetter(r)`：判断是否为字母
* `unicode.ToUpper(r)`：转大写

---

## 零值与初始化

| 类型       | 零值         |
|----------|------------|
| `string` | `""`（空字符串） |
| `byte`   | `0`        |
| `rune`   | `0`        |
